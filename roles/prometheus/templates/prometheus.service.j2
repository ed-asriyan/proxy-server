[Unit]
Description=prometheus
After=outline.service

[Service]
User={{ user }}
WorkingDirectory=/home/{{ user }}
LimitDATA={{ prometheus.memory_limit }}
ExecStart=/home/{{ user }}/{{ downloads[arch.stdout].directory }}/{{ executable_name }} --config.file /home/{{ user }}/config.yml --web.listen-address 0.0.0.0:{{ prometheus.port }} --web.external-url https://{{ domain }}:{{ prometheus.port }} --web.config.file /home/{{ user }}/web-config.yml --storage.tsdb.retention.time {{ prometheus.retention }}
Restart=always

[Install]
WantedBy=multi-user.target
